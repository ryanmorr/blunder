/*! @ryanmorr/blunder v1.0.0 | https://github.com/ryanmorr/blunder */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).blunder={})}(this,(function(e){"use strict";function n(e,t=new WeakSet){if(null==e)return e;if(t.has(e))return"[Circular]";const r=function(e){return{}.toString.call(e).slice(8,-1)}(e);return"String"===r||"Number"===r||"Boolean"===r||"Date"===r?e:"Function"===r?`[Function: ${e.name||"anonymous"}]`:"Array"===r?function(e,t){t.add(e);const r=e.map((e=>n(e,t)));return t.delete(e),r}(e,t):"Object"===r?function(e,t){t.add(e);const r={};for(const[s,o]of Object.entries(e))r[s]=n(o,t);return t.delete(e),r}(e,t):e instanceof Error?"function"==typeof e.serializable?function(e,t){t.add(e);const r=n(e.serializable(),t);return t.delete(e),r}(e,t):function(e,t){t.add(e);const r={name:e.name,message:e.message,stack:e.stack};return"cause"in e&&(r.cause=n(e.cause,t)),t.delete(e),r}(e,t):void 0}function t(e,n,t){Object.defineProperty(e,n,{configurable:!0,enumerable:!1,value:t,writable:!0})}class r extends Error{constructor(e,n={}){const{cause:r=null,...s}=n;super(e,{cause:r}),t(this,"name",this.constructor.name),"cause"in this||t(this,"cause",r),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),"string"!=typeof this.stack&&t(this,"stack",new Error(e).stack),t(this,"data",s)}serializable(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause,data:this.data}}toJSON(){return n(this)}toString(){return`${this.name}: ${this.message}`}static from(e,n){const t=this;if(e instanceof t){if(n){const{cause:t=null,...r}=n;Object.assign(e.data,r),t&&(e.cause=t)}return e}if(e instanceof Error){const{message:r,stack:s,cause:o,errors:i}=e,a=new t(r,n);return a.stack=s,o?a.cause=o:i&&(a.cause=i.slice()),a.source=e,a}return new t(String(e),n)}}const s=[],o=new WeakSet;function i(e,n){const t=r.from(e,n);return o.has(t)||(o.add(t),s.slice().forEach((e=>e(t)))),t}let a=!1,c=!1,u=!1;function d(e){e.preventDefault(),i(r.from(e.error,{event:e}))}function f(e){e.preventDefault(),i(r.from(e.reason,{event:e}))}function l(e){e.preventDefault(),i(r.from(e.reason,{event:e}))}function h(){a&&(a=!1,window.removeEventListener("error",d)),c&&(c=!1,window.removeEventListener("unhandledrejection",f)),u&&(u=!1,window.removeEventListener("rejectionhandled",l))}function m(e){return[void 0,e]}function p(e){return[e,void 0]}function v(e,n){return e.then((e=>p(e)),(e=>m(i(e,n))))}e.Exception=r,e.attempt=function(e,n){if(e instanceof Promise)return v(e,n);try{const t=e();return t instanceof Promise?v(t,n):p(t)}catch(e){return m(i(e,n))}},e.dispatch=i,e.monitor=function({error:e=!0,unhandledrejection:n=!0,rejectionhandled:t=!0}={}){return a||c||u||(e&&(a=!0,window.addEventListener("error",d,!0)),n&&(c=!0,window.addEventListener("unhandledrejection",f)),t&&(u=!0,window.addEventListener("rejectionhandled",l))),h},e.subscribe=function(e){return s.push(e),()=>{const n=s.indexOf(e);-1!==n&&s.splice(n,1)}}}));
