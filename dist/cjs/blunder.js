/*! @ryanmorr/blunder v1.0.0 | https://github.com/ryanmorr/blunder */
"use strict";function e(t,n=new WeakSet){if(null==t)return t;if(n.has(t))return"[Circular]";const r=function(e){return{}.toString.call(e).slice(8,-1)}(t);return"String"===r||"Number"===r||"Boolean"===r||"Date"===r?t:"Function"===r?`[Function: ${t.name||"anonymous"}]`:"Array"===r?function(t,n){n.add(t);const r=t.map((t=>e(t,n)));return n.delete(t),r}(t,n):"Object"===r?function(t,n){n.add(t);const r={};for(const[s,o]of Object.entries(t))r[s]=e(o,n);return n.delete(t),r}(t,n):t instanceof Error?"function"==typeof t.serializable?function(t,n){n.add(t);const r=e(t.serializable(),n);return n.delete(t),r}(t,n):function(t,n){n.add(t);const r={name:t.name,message:t.message,stack:t.stack};return"cause"in t&&(r.cause=e(t.cause,n)),n.delete(t),r}(t,n):void 0}function t(e,t,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0})}class n extends Error{constructor(e,n={}){const{cause:r=null,...s}=n;super(e,{cause:r}),t(this,"name",this.constructor.name),"cause"in this||t(this,"cause",r),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),"string"!=typeof this.stack&&t(this,"stack",new Error(e).stack),t(this,"data",s)}serializable(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause,data:this.data}}toJSON(){return e(this)}toString(){return`${this.name}: ${this.message}`}static from(e,t){const n=this;if(e instanceof n){if(t){const{cause:n=null,...r}=t;Object.assign(e.data,r),n&&(e.cause=n)}return e}if(e instanceof Error){const{message:r,stack:s,cause:o,errors:a}=e,i=new n(r,t);return i.stack=s,o?i.cause=o:a&&(i.cause=a.slice()),i.source=e,i}return new n(String(e),t)}}const r=[],s=new WeakSet;function o(e,t){const o=n.from(e,t);return s.has(o)||(s.add(o),r.slice().forEach((e=>e(o)))),o}let a=!1,i=!1,c=!1;function u(e){e.preventDefault(),o(n.from(e.error,{event:e}))}function d(e){e.preventDefault(),o(n.from(e.reason,{event:e}))}function f(e){e.preventDefault(),o(n.from(e.reason,{event:e}))}function l(){a&&(a=!1,window.removeEventListener("error",u)),i&&(i=!1,window.removeEventListener("unhandledrejection",d)),c&&(c=!1,window.removeEventListener("rejectionhandled",f))}function h(e){return[void 0,e]}function m(e){return[e,void 0]}function p(e,t){return e.then((e=>m(e)),(e=>h(o(e,t))))}exports.Exception=n,exports.attempt=function(e,t){if(e instanceof Promise)return p(e,t);try{const n=e();return n instanceof Promise?p(n,t):m(n)}catch(e){return h(o(e,t))}},exports.dispatch=o,exports.monitor=function({error:e=!0,unhandledrejection:t=!0,rejectionhandled:n=!0}={}){return a||i||c||(e&&(a=!0,window.addEventListener("error",u,!0)),t&&(i=!0,window.addEventListener("unhandledrejection",d)),n&&(c=!0,window.addEventListener("rejectionhandled",f))),l},exports.subscribe=function(e){return r.push(e),()=>{const t=r.indexOf(e);-1!==t&&r.splice(t,1)}};
